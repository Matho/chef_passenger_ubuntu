node.default["passenger_ubuntu"]["ssh_public_key"] = "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDCHbrA5oPtkzTNp749Rqhc1XNcBuco4HNAxzPUsQKw/qa6c5AgwNZOHwqr8lr02nTBqGxv0DbatJAaeXCwrXyPMxDCIY6n9KerLh5wSxkJnVVvjbAx5x1FMGrDQA/CgPTxyksRgmiEyHcz7YpMBan+iGlSq+Lx7dk0hiJQOosmdtTcQMMssOs1q8UD6e+SJZ0CASuI1/k4lcVrpdkGS6lN4AxNNbxtjsGcWEX4rA6grtidj3+P9iiWEgbJJcq6WywcUgV7swsjGoagnEUIMJEu97t8XDGm2aXSs/Hk5szX1o41JeENREcpjjQ03zMD92bp/cgfBgFJJdhxYQiDd+4D matomarkech@gmail.com"
node.default["passenger_ubuntu"]["id_rsa"] = "-----BEGIN RSA PRIVATE KEY-----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-----END RSA PRIVATE KEY-----"
node.default["passenger_ubuntu"]["id_rsa_pub"] = "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCsqLAa3nF5FJSyB9TKVMIYFm5KnuusLr2FVqIaj/YY98Fqeu/eLk2+7GxcLzVfFxnZO2PNfN0IH8PZjvvSZbXQEGRd1MyXEgUBQt8xr9AwGSoGotVeK/WwuYQGqlMr88YsuyZbjd/YisUAbrvrUruUg4u0abg93wNODZcJDGS7pwaeJLgatJW14E9BOIVxbfSxnVpYzsgUtCPUn092x1dLT1z9f3nMsSRzwdZrsYvkqqqeuaYbP2jk4us4iNgynaN+4LO0z/9Hf6K7VOnp/Jyu//jTnFIoTozERAnDfCvZVVzkl00VnkScnQY93sc/ZZot1fUmqhNAMqyI0DfOmgWUq7M7oHT1cRcIonkVNsXz0RFBN9NdZWjbwPe7zZ4JOJLIzxHxYzLy3iQ1fwayxHXyvXZiw6ZCOhSHhZeyDp0plTb+xgaE9oYJjWfqQXP6h+0q0z1u22I6ZEZJeuuDSoh3LL1NfGoNfc6u8SEXvPrNr7eZYpINWXHZBHUE9quYxFE+VVViV2sRTaMDs0kMm4Q10kKjkUFhlNIrP4qVjlCTdxU2ZtA+Xf8m9i9KANdLz9cdKQ3HUndu9LXeZNY8YHYfNP/rkQvdds+toIY/BAJUKSawuXBBi9Tj/7u3S88wMY3RXRYe7rlJ96CG+PIoOT8jnoP4GeuJFKfqgs5BgbYdFw== rails_app@matho.sk"
node.default["passenger_ubuntu"]["open_ports"] = [80,22,7777,5432]


# rvm_passenger_nginx
node.default["rvm_passenger_nginx"]["nginx"]["workers"] = 2
node.default["rvm_passenger_nginx"]["passenger"]["site"]["min_instances"] = 1
node.default["rvm_passenger_nginx"]["passenger"]["user"] = "webserver"
node.default["rvm_passenger_nginx"]["passenger"]["group"] = "deploy"
node.default["rvm_passenger_nginx"]["secret_file"] = "/home/webserver/chef_secret"

node.default["rvm_passenger_nginx"]["applications"] = [{
    "name" => "rails_app",
    "repo" => "git@gitlab.websupport.sk:matho/rails_app.git",
    "branch" => "master",
    "ruby" => "2.2.0",
    "rails" => "4.2.7",
    "server" => "rails_app.matho.sk",
    "environment" => "production",
    "secret_key_base" => "e55b4f64180754f4ea2b76663e664e270e793907c44287fb166148eb978c9b6e141a79281690a798cbad60a88d3b6b7b271bed231a88001d4d0aa9238b41c708"
}]


# postgresql cookbook
node.default['postgresql']['version'] = "9.5"
node.default['postgresql']['dir'] = '/etc/postgresql/9.5/main'
node.default['postgresql']['client']['packages'] = ['postgresql-client-9.5', 'libpq-dev']
node.default['postgresql']['server']['packages'] = ['postgresql-9.5', 'postgresql-9.5-dbg', 'postgresql-server-dev-9.5', 'postgresql-doc-9.5', 'postgresql-pltcl-9.5']
node.default['postgresql']['contrib']['packages'] = ['postgresql-contrib-9.5']

# # sudo
# # TODO - makes problems
# #node.default['authorization']['sudo']['users'] = ["martin", "vagrant"]
#
# sshd
node.default['sshd']['sshd_config']['Port'] = 22
node.default['sshd']['sshd_config']['PermitRootLogin'] = 'no'
node.default['sshd']['sshd_config']['PubkeyAuthentication'] = 'yes'
#node.default['sshd']['sshd_config']['AllowGroups'] = 'sshlogin'

node.default['fail2ban']['services'] = {
    'ssh' => {
        "enabled" => "true",
        "port" => "ssh",
        "filter" => "sshd",
        "logpath" => node['fail2ban']['auth_log'],
        "maxretry" => "6"
    }
}








